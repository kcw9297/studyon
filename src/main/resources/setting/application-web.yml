# ===============================
# common
# ===============================

spring:
  # 공용 설정 - JSP View Template
  mvc:
    view:
      prefix: /WEB-INF/views/
      suffix: .jsp

  # 공용 설정 - file
  servlet:
    multipart:
      max-file-size: 10MB
      max-request-size: 50MB

  # 공용 설정 - Redis Cache 사용
  cache:
    type: redis

  # 공용 설정 - Redis
  data:
    redis:
      repositories:
        enabled: false

  session:
    redis:
      namespace: spring


# ===============================
# profile - local
# ===============================
---
spring:
  config:
    activate:
      on-profile: local

  devtools:
    restart:
      enabled: true # 자동 재시작

  session:
    timeout: 5m # 5분 지속


  data:
    redis:
      host: localhost
      port: ${LOCAL_REDIS_HOST}
      password: ${LOCAL_REDIS_PASSWORD}
      timeout: 5000
      ssl:
        enabled: false

      lettuce:
        pool:
          max-active: 4
          max-idle: 2
          min-idle: 1


server:
  port: 8080 # 서버 포트
  servlet:
    session:
      cookie:
        path: /
        http-only: false
        secure: false

# ===============================
# profile - prod
# ===============================
---
spring:
  config:
    activate:
      on-profile: prod

  session:
    timeout: 1d # 1일 지속

  data:
    redis:
      host: master.cache-studyon.k7syup.apn2.cache.amazonaws.com #${PROD_REDIS_HOST}
      port: 6379
      password:
      timeout: 10000
      ssl:
        enabled: true  # ssl 암호화 연결 여부 (AWS ElastiCache 에선 true, 로컬에선 false)

      lettuce:
        pool:
          max-active: 20
          max-idle: 10
          min-idle: 5


server:
  port: 8080 # 서버 포트

  servlet:
    session:
      cookie:
        path: /
        http-only: true
        secure: true